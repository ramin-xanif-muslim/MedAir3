"use strict";(self.webpackChunkMedAir3=self.webpackChunkMedAir3||[]).push([[12],{6651:function(t,e,n){var r=n(2964),a=n(2791),s=n(2486),i=n(1244),o=n(4087),u=n(184);function c(){var t=(0,i.o)((function(t){return t.isFieldsChange})),e=(0,i.o)((function(t){return t.setIsFieldsChange})),n=(0,s.Z)();n.handleSave,n.isLoading;return t?(0,u.jsx)(u.Fragment,{children:(0,u.jsx)(r.Z,{message:(0,u.jsx)(o.xu,{color:"red",children:"You have an unsaved patient!"}),onClose:function(){e(!1)},type:"warning",showIcon:!0,closable:!0})}):""}e.Z=(0,a.memo)(c)},9572:function(t,e,n){n.d(e,{$M:function(){return u},H9:function(){return f},M9:function(){return h},Yo:function(){return d},bp:function(){return c},dK:function(){return Z},jW:function(){return p},pP:function(){return y},si:function(){return l}});var r=n(4165),a=n(5861),s=n(7027),i=n(4488),o=function(t,e){t&&"string"!==typeof t?s.ZP.success({content:e+" saved",key:e+"_save",duration:2}):s.ZP.error({content:e+" don't saved",key:e+"_save",duration:2})},u=function(){var t=(0,a.Z)((0,r.Z)().mark((function t(){var e;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,i.Z)("patientid",{},"get");case 3:return e=t.sent,t.abrupt("return",e.data);case 7:t.prev=7,t.t0=t.catch(0),s.ZP.error({content:t.t0,key:"doc_save",duration:2});case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}(),c=function(){var t=(0,a.Z)((0,r.Z)().mark((function t(e){var n;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,i.Z)("vite",e,"post");case 2:return n=t.sent,o(n,"Person Info"),t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),d=function(){var t=(0,a.Z)((0,r.Z)().mark((function t(e){var n;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,i.Z)("morby",e,"post");case 2:n=t.sent,o(n,"Disease History");case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),p=function(){var t=(0,a.Z)((0,r.Z)().mark((function t(e){var n;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,i.Z)("visits",e,"post");case 2:n=t.sent,o(n,"Visit");case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),f=function(){var t=(0,a.Z)((0,r.Z)().mark((function t(e){var n;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,i.Z)("analyses",e,"post");case 2:n=t.sent,o(n,"Analyses");case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),l=function(){var t=(0,a.Z)((0,r.Z)().mark((function t(e){var n;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,i.Z)("treatment",e,"post");case 2:n=t.sent,o(n,"Treatment");case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),v=function(){var t=(0,a.Z)((0,r.Z)().mark((function t(e){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,i.Z)("visitsformcalendar",e,"post"));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),m=function(){var t=(0,a.Z)((0,r.Z)().mark((function t(e){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",(0,i.Z)("patients/".concat(e)));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),Z=function(){var t=(0,a.Z)((0,r.Z)().mark((function t(e){var n,a,i,o,d,p,f,l,Z,h,y,b;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=e.sendObj).patientId){t.next=7;break}i=n.patientId,m(i).then((function(t){null!==t&&void 0!==t&&t.data?a=n.patientId:s.ZP.warning({content:"The Patient not find",key:"info_message",duration:4})})),a=n.patientId,t.next=10;break;case 7:return t.next=9,u();case 9:a=t.sent;case 10:if(o=n.patientName,d=n.patientSurName,p=n.patientPatronymic,f=n.visitDate,l=n.phoneNumber,Z=n.status,h=n.visitReason,y={patientVisitsList:[{patientId:a,status:Z,visitDate:f,visitReason:h}]},b={patientId:a,patientName:o,patientSurName:d,patientPatronymic:p,phoneNumber:l},!a){t.next=20;break}if(n.patientId){t.next=17;break}return t.next=17,c(b);case 17:return t.next=19,v(y);case 19:t.sent;case 20:return t.abrupt("return",!0);case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),h=function(){var t=(0,a.Z)((0,r.Z)().mark((function t(){var e;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,i.Z)("managers/pathologists");case 2:if(null===(e=t.sent)||void 0===e||!e.data){t.next=5;break}return t.abrupt("return",e.data);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),y=function(){var t=(0,a.Z)((0,r.Z)().mark((function t(){var e;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,i.Z)("managers/places");case 2:if(null===(e=t.sent)||void 0===e||!e.data){t.next=5;break}return t.abrupt("return",e.data);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},9162:function(t,e,n){n.d(e,{Z:function(){return l}});var r=n(4165),a=n(5861),s=n(9439),i=n(7689),o=n(4488),u=n(3052),c=n(1244),d=n(2791),p=n(7892),f=n.n(p),l=function(){var t=(0,d.useState)(!1),e=(0,s.Z)(t,2),n=e[0],p=e[1],l=(0,u.b)(),v=l.personInfoForm,m=l.diseaseHistoryForm,Z=l.patientForm,h=l.setFamilyMembersList,y=l.treatmentHistoryForm,b=(0,i.s0)(),g=function(){var t=(0,a.Z)((0,r.Z)().mark((function t(e){var n;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,o.Z)("vite/"+e,{},"get");case 3:null!==(n=t.sent)&&void 0!==n&&n.data&&(console.log("res?.fetchPersonInfo",null===n||void 0===n?void 0:n.data),n.data.birthDate=n.data.birthDate?f()(n.data.birthDate):null,v.setFieldsValue(n.data),Z.setFieldsValue(n.data)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("%c error","background: red; color: dark",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),k=(0,c.o)((function(t){return t.setDataSourceDiseaseHistoryTable})),x=(0,c.o)((function(t){return t.setSavedDrawingCanvas})),w=(0,c.o)((function(t){return t.setDescriptionsCanvas})),I=function(){var t=(0,a.Z)((0,r.Z)().mark((function t(e){var n,a,s,i;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,o.Z)("morby/"+e,{},"get");case 3:null!==(n=t.sent)&&void 0!==n&&n.data&&(console.log("res?.fetchDiseaseHistory",null===n||void 0===n?void 0:n.data),m.setFieldsValue(n.data),null===n||void 0===n||n.data.deseaseHistoryDynamicsList.forEach((function(t){return t.id=t.patientsComplaintsId})),k(n.data.deseaseHistoryDynamicsList),h(n.data.familyMembersList),x((null===(a=n.data)||void 0===a?void 0:a.deseaseImagesList)||{}),null!==(s=n.data.deseaseImagesList)&&void 0!==s&&s.deseaseImageDesc&&(i=JSON.parse(n.data.deseaseImagesList.deseaseImageDesc),w(i))),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("%c error","background: red; color: dark",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),D=(0,c.o)((function(t){return t.setDataSourceVisitTable})),F=function(){var t=(0,a.Z)((0,r.Z)().mark((function t(e){var n;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,o.Z)("visits/patientId/"+e,{},"get");case 3:null!==(n=t.sent)&&void 0!==n&&n.data&&(console.log("res?.fetchVisits",null===n||void 0===n?void 0:n.data),n.data.forEach((function(t){return t.id=t.visitId})),D(n.data)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("%c error","background: red; color: dark",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),L=(0,c.o)((function(t){return t.setDataSourceAnalysisTable})),S=function(){var t=(0,a.Z)((0,r.Z)().mark((function t(e){var n;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,o.Z)("analyses/"+e,{},"get");case 3:null!==(n=t.sent)&&void 0!==n&&n.data&&(console.log("res?.fetchAnalyses",null===n||void 0===n?void 0:n.data),n.data.forEach((function(t){return t.id=t.analyzesId})),L(n.data)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("%c error","background: red; color: dark",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),V=(0,c.o)((function(t){return t.setDataSourceTreatmentTable})),T=(0,c.o)((function(t){return t.setRecipeList})),P=function(){var t=(0,a.Z)((0,r.Z)().mark((function t(e){var n,a,s,i;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,o.Z)("treatment/"+e,{},"get");case 3:null!==(n=t.sent)&&void 0!==n&&n.data&&(console.log("res?.fetchTreatment",null===n||void 0===n?void 0:n.data),y.setFieldsValue(n.data),a=n.data,s=a.treatmentDynamics,i=a.recipeList,s.forEach((function(t){return t.id=t.treatmentId})),V(s),i.forEach((function(t){return t.id=t.recipeId})),T(i)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("%c error","background: red; color: dark",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}();return{onRowTable:function(t){try{!function(t){try{p(!0),Promise.all([g(t),I(t),F(t),S(t),P(t)]).then((function(t){p(!1),b("/person_info")}))}catch(e){}}(t.patientId)}catch(e){console.log("%c error","background: red; color: dark",e.message)}},isLoading:n}}},2486:function(t,e,n){var r=n(4165),a=n(5861),s=n(1413),i=n(9439),o=n(7892),u=n.n(o),c=n(9572),d=n(3052),p=n(1244),f=n(2791);e.Z=function(){var t=(0,f.useState)(!1),e=(0,i.Z)(t,2),n=e[0],o=e[1],l=(0,d.b)(),v=l.patientForm,m=l.personInfoForm,Z=l.diseaseHistoryForm,h=l.familyMembersList,y=l.treatmentHistoryForm,b=(0,p.o)((function(t){return t.dataSourceDiseaseHistoryTable})),g=(0,p.o)((function(t){return t.savedDrawingCanvas})),k=(0,p.o)((function(t){return t.descriptionsCanvas})),x=(0,p.o)((function(t){return t.dataSourceVisitTable})),w=(0,p.o)((function(t){return t.dataSourceAnalysisTable})),I=(0,p.o)((function(t){return t.dataSourceTreatmentTable})),D=(0,p.o)((function(t){return t.recipeList})),F=function(t){var e=v.getFieldsValue(),n=e.patientName,r=e.patientSurName,a=e.patientPatronymic,i=m.getFieldsValue(),o=i.birthDate,d=i.alkogol,p=i.smoke,f=(0,s.Z)((0,s.Z)({},m.getFieldsValue()),{},{birthDate:u()(o).format("YYYY-MM-DD"),alkogol:d?1:0,smoke:p?1:0,patientName:n,patientSurName:r,patientPatronymic:a,patientId:t});(0,c.bp)(f)},L=function(t){g.deseaseImageDesc=JSON.stringify(k);var e=(0,s.Z)((0,s.Z)({},Z.getFieldsValue()),{},{patientId:t,familyMembersList:h,deseaseImagesList:g,deseaseHistoryDynamicsList:b});(0,c.Yo)(e)},S=function(t){var e={patientVisitsList:x,patientId:t};(0,c.jW)(e)},V=function(t){var e={analyzesMediaList:w,patientId:t};(0,c.H9)(e)},T=function(t){var e=(0,s.Z)((0,s.Z)({},y.getFieldsValue()),{},{patientId:t,treatmentDynamics:I,recipeList:D});(0,c.si)(e)},P=function(){var t=(0,a.Z)((0,r.Z)().mark((function t(){var e,n;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o(!0),setTimeout((function(){o(!1)}),1e3),!(e=v.getFieldsValue().patientId)){t.next=7;break}n=e,t.next=10;break;case 7:return t.next=9,(0,c.$M)();case 9:n=t.sent;case 10:n&&Promise.all([F(n),L(n),S(n),V(n),T(n)]);case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return{handleSave:P,isLoading:n}}}}]);
//# sourceMappingURL=12.f8e9e063.chunk.js.map