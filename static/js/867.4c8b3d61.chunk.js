"use strict";(self.webpackChunkMedAir3=self.webpackChunkMedAir3||[]).push([[867],{6877:function(e,t,n){var r=n(3655),i=n(5820),a=n(2791),s=n(2622),o=n(4087),u=n(184);function c(e){var t=e.onClick;return(0,u.jsx)(r.Z.Link,{children:(0,u.jsx)(o.xu,{color:"red",onClick:function(e){return e.stopPropagation()},children:(0,u.jsx)(i.Z,{title:"Are you sure you want to delete this item?",okText:"Yes",cancelText:"No",onConfirm:t,children:(0,u.jsx)(s.Z,{})})})})}t.Z=(0,a.memo)(c)},378:function(e,t,n){var r=n(4087),i=n(7885),a=n(6070),s=n(2791),o=n(2414),u=n(184);function c(e){var t=e.items,n=e.isOpen,s=e.onOpenChange;return(0,u.jsx)(r.xu,{cursor:"pointer",children:(0,u.jsx)(a.Z,{trigger:["click"],menu:{items:t},open:n,onOpenChange:s,children:(0,u.jsx)(i.h,{variant:"ghost",color:"pink.500",size:"sm",isRound:!0,"aria-label":"Search database",icon:(0,u.jsx)(o.Z,{})})})})}t.Z=(0,s.memo)(c)},9572:function(e,t,n){n.d(t,{$M:function(){return u},H9:function(){return p},M9:function(){return v},Yo:function(){return l},bp:function(){return c},dK:function(){return h},jW:function(){return d},pP:function(){return Z},si:function(){return f}});var r=n(4165),i=n(5861),a=n(7027),s=n(4488),o=function(e,t){e&&"string"!==typeof e?a.ZP.success({content:t+" saved",key:t+"_save",duration:2}):a.ZP.error({content:t+" don't saved",key:t+"_save",duration:2})},u=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,s.Z)("patientid",{},"get");case 3:return t=e.sent,e.abrupt("return",t.data);case 7:e.prev=7,e.t0=e.catch(0),a.ZP.error({content:e.t0,key:"doc_save",duration:2});case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),c=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,s.Z)("vite",t,"post");case 2:return n=e.sent,o(n,"Person Info"),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,s.Z)("morby",t,"post");case 2:n=e.sent,o(n,"Disease History");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,s.Z)("visits",t,"post");case 2:n=e.sent,o(n,"Visit");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,s.Z)("analyses",t,"post");case 2:n=e.sent,o(n,"Analyses");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,s.Z)("treatment",t,"post");case 2:n=e.sent,o(n,"Treatment");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.Z)("visitsformcalendar",t,"post"));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,s.Z)("patients/".concat(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(t){var n,i,s,o,l,d,p,f,h,v,Z,b;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.sendObj).patientId){e.next=7;break}s=n.patientId,x(s).then((function(e){null!==e&&void 0!==e&&e.data?i=n.patientId:a.ZP.warning({content:"The Patient not find",key:"info_message",duration:4})})),i=n.patientId,e.next=10;break;case 7:return e.next=9,u();case 9:i=e.sent;case 10:if(o=n.patientName,l=n.patientSurName,d=n.patientPatronymic,p=n.visitDate,f=n.phoneNumber,h=n.status,v=n.visitReason,Z={patientVisitsList:[{patientId:i,status:h,visitDate:p,visitReason:v}]},b={patientId:i,patientName:o,patientSurName:l,patientPatronymic:d,phoneNumber:f},!i){e.next=20;break}if(n.patientId){e.next=17;break}return e.next=17,c(b);case 17:return e.next=19,m(Z);case 19:e.sent;case 20:return e.abrupt("return",!0);case 21:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),v=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,s.Z)("managers/pathologists");case 2:if(null===(t=e.sent)||void 0===t||!t.data){e.next=5;break}return e.abrupt("return",t.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,s.Z)("managers/places");case 2:if(null===(t=e.sent)||void 0===t||!t.data){e.next=5;break}return e.abrupt("return",t.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},3416:function(e,t,n){function r(e){return JSON.parse(JSON.stringify(e))}n.d(t,{p:function(){return r}})},9867:function(e,t,n){n.r(t),n.d(t,{default:function(){return $}});var r=n(4165),i=n(5861),a=n(2791),s=n(4087),o=n(9439),u=n(131),c=n(7027),l=n(9555),d=n(1326),p=n(2426),f=n.n(p),m=n(2491),x=n(1244),h=n(6877),v=n(184);function Z(e){var t=e.handleDelete;return(0,v.jsx)(h.Z,{onClick:t})}var b=(0,a.memo)(Z),w=n(3433),j=n(2014),k=n(3416),y=n(378);function g(e){var t=e.columns,n=(0,a.useState)(!1),r=(0,o.Z)(n,2),i=r[0],s=r[1],u=(0,x.m)((function(e){return e.calendarTableSetting})),c=(0,x.m)((function(e){return e.setCalendarTableSetting})),l=function(e){var t=e.target.id,n=e.target.checked,r=(0,k.p)(u);r.forEach((function(e){e.dataIndex===t&&(e.isVisible=n)})),c((0,w.Z)(r))};(0,a.useEffect)((function(){var e=t.map((function(e){return{key:e.key,dataIndex:e.dataIndex,isVisible:e.isVisible,title:e.title}}));c(e)}),[]);var d=(0,a.useMemo)((function(){return u?null===u||void 0===u?void 0:u.map((function(e){return{label:(0,v.jsx)(j.Z,{id:null===e||void 0===e?void 0:e.dataIndex,onChange:l,defaultChecked:null===e||void 0===e?void 0:e.isVisible,children:e.title})}})):[]}),[u]);return(0,v.jsx)(y.Z,{items:d,isOpen:i,onOpenChange:function(e){s(e)}})}var S=(0,a.memo)(g),D=n(4488),I=n(9162);function C(e){var t=e.dataSource,n=e.refetch,p=e.isLoadingOnSelectCalendar,h=(0,a.useState)(),Z=(0,o.Z)(h,2),w=Z[0],j=Z[1],k=(0,m.a)("(min-width: 400px)"),y=(0,o.Z)(k,1)[0],g=(0,x.m)((function(e){return e.calendarTableSetting})),C=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return null!==g&&void 0!==g&&g.find((function(t){return t.dataIndex===e}))?g.find((function(t){return t.dataIndex===e})).isVisible:t},P=(0,a.useMemo)((function(){return[{title:"Patient Number",dataIndex:"patientId",key:"patientId",ellipsis:!0,width:!y&&100,isVisible:C("patientId")},{title:"Time",dataIndex:"visitDate",key:"visitDate",ellipsis:!0,width:!y&&150,isVisible:C("visitDate"),render:function(e){return(0,v.jsx)(u.Z,{placement:"topLeft",title:e,children:e})}},{title:"Name",dataIndex:"patientName",key:"patientName",ellipsis:!0,width:!y&&150,isVisible:C("patientName"),render:function(e){return(0,v.jsx)(u.Z,{placement:"topLeft",title:e,children:e})}},{title:"Surname",dataIndex:"patientSurName",key:"patientSurName",ellipsis:!0,width:!y&&150,isVisible:C("patientSurName"),render:function(e){return(0,v.jsx)(u.Z,{placement:"topLeft",title:e,children:e})}},{title:"Patronymic",dataIndex:"patientPatronymic",key:"patientPatronymic",ellipsis:!0,width:!y&&150,isVisible:C("patientPatronymic"),render:function(e){return(0,v.jsx)(u.Z,{placement:"topLeft",title:e,children:e})}},{title:"Age",dataIndex:"birthDate",key:"birthDate",ellipsis:!0,width:!y&&150,isVisible:C("birthDate"),render:function(e){return e?f()().diff(e,"years"):""}},{title:"Mobile number",ellipsis:!0,width:!y&&150,dataIndex:"phoneNumber",key:"phoneNumber",isVisible:C("phoneNumber"),render:function(e){return(0,v.jsx)(u.Z,{placement:"topLeft",title:e,children:e})}},{title:"Reason",dataIndex:"visitReason",key:"visitReason",ellipsis:!0,width:!y&&150,isVisible:C("visitReason"),render:function(e){return(0,v.jsx)(u.Z,{placement:"topLeft",title:e,children:e})}},{title:"Address",dataIndex:"placeName",key:"placeName",isVisible:C("placeName"),ellipsis:!0,width:!y&&150,render:function(e){return(0,v.jsx)(u.Z,{placement:"topLeft",title:e,children:e})}},{title:"Recomendation",dataIndex:"recommendationPerson",key:"recommendationPerson",isVisible:C("recommendationPerson"),ellipsis:!0,width:!y&&150,render:function(e){return(0,v.jsx)(u.Z,{placement:"topLeft",title:e,children:e})}},{title:"Status",dataIndex:"status",key:"status",isVisible:C("status"),ellipsis:!0,width:!y&&150,render:function(e,t,n){var a=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n){var i,a,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=t.id,a={id:i,status:n},e.next=5,(0,D.Z)("visittable",a,"post");case 5:null!==(s=e.sent)&&void 0!==s&&s.data?c.ZP.success("Status changed"):c.ZP.warning("Something went wrong"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log("%c error","background: red; color: dark",e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();return(0,v.jsx)(s.xu,{m:"0.5",onClick:function(e){e.stopPropagation(),e.preventDefault()},children:(0,v.jsxs)(l.Z,{onSelect:a,defaultValue:e,allowClear:!0,style:{width:"100%"},children:[(0,v.jsx)(l.Z.Option,{value:"unsolved",children:"Unsolved"}),(0,v.jsx)(l.Z.Option,{value:"approved",children:"Approved"})]})})}},{title:"Delete",dataIndex:"delete",width:50,key:"delete",isVisible:C("delete"),ellipsis:!0,align:"center",render:function(e,t,a){var s=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var i,a;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c.ZP.loading(),console.log("row",t),i=t.id,e.next=5,(0,D.Z)("visits/"+i,{},"delete");case 5:return null!==(a=e.sent)&&void 0!==a&&a.data?(c.ZP.success(),n()):c.ZP.warning("Something went wrong"),e.abrupt("return",!0);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,v.jsx)(b,{handleDelete:s})}}]}),[y,g]),N=(0,I.Z)(),V=N.onRowTable,Y=N.isLoading;return(0,v.jsxs)(s.xu,{display:"flex",flexDirection:"column",children:[(0,v.jsx)(s.xu,{alignSelf:"flex-end",children:(0,v.jsx)(S,{columns:P})}),(0,v.jsx)(d.Z,{loading:Y||p,size:"small",bordered:!0,scroll:{x:window.innerHeight},pagination:!1,columns:P.filter((function(e){return!0===e.isVisible})),dataSource:t||[],rowClassName:function(e,t){return w===t+1?"ant-table-row-selected":""},onRow:function(e,t){return{onClick:function(n){null===V||void 0===V||V(e,t),j(t)}}}})]})}var P=(0,a.memo)(C),N=n(9223),V=n(4224),Y=n(9006),M=n(8348),F=n(1041),O=n(9998),R=n(7309),T=n(9389),L=n(5953),A=n(8431),H=n(7892),z=n.n(H),_=n(9572);function K(e){var t=e.refetch,n=(0,M.q)(),s=n.isOpen,u=n.onOpen,c=n.onClose,d=(0,a.useState)(!1),p=(0,o.Z)(d,2),f=p[0],m=p[1],x=F.Z.useForm(),h=(0,o.Z)(x,1)[0],Z=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(n){var i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),(i=n).visitDate=z()(n.visitDate).format("YYYY-MM-DD HH:mm"),m(!1),e.next=6,(0,_.dK)({sendObj:i});case 6:h.resetFields(),t(),c();case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(V.z,{size:"sm",colorScheme:"blue",onClick:u,children:"Add visit"}),(0,v.jsx)(O.Z,{footer:[(0,v.jsx)(R.ZP,{onClick:c,children:"Cancel"},"1"),(0,v.jsx)(R.ZP,{type:"primary",htmlType:"submit",form:"visitModalForm",loading:f,children:"Add"},"2")],closable:!1,open:s,onCancel:c,children:(0,v.jsxs)(F.Z,{form:h,onFinish:Z,id:"visitModalForm",labelAlign:"left",labelCol:{span:8},wrapperCol:{span:16},style:{maxWidth:600},children:[(0,v.jsx)(F.Z.Item,{label:"Id",name:"patientId",children:(0,v.jsx)(T.Z,{type:"number",allowClear:!0})}),(0,v.jsx)(F.Z.Item,{label:"Name",name:"patientName",children:(0,v.jsx)(T.Z,{allowClear:!0})}),(0,v.jsx)(F.Z.Item,{label:"Surname",name:"patientSurName",children:(0,v.jsx)(T.Z,{allowClear:!0})}),(0,v.jsx)(F.Z.Item,{label:"Reason",name:"visitReason",children:(0,v.jsx)(T.Z,{allowClear:!0})}),(0,v.jsx)(F.Z.Item,{label:"Date",name:"visitDate",children:(0,v.jsx)(L.Z,{showTime:!0,allowClear:!0,format:"YYYY-MM-DD HH:mm",defaultValue:z()()})}),(0,v.jsx)(F.Z.Item,{label:"Mobile Number",name:"phoneNumber",children:(0,v.jsx)(A.CX,{allowClear:!0,style:{width:"130px"},mask:"000 000 00 00"})}),(0,v.jsx)(F.Z.Item,{label:"Status",name:"status",children:(0,v.jsxs)(l.Z,{allowClear:!0,children:[(0,v.jsx)(l.Z.Option,{value:"unsolved",children:"Unsolved"}),(0,v.jsx)(l.Z.Option,{value:"approved",children:"Approved"})]})})]})})]})}var E=(0,a.memo)(K),J=n(7689),U=n(3052);var W=function(){var e=(0,U.b)(),t=e.personInfoForm,n=e.diseaseHistoryForm,r=e.patientForm,i=e.setFamilyMembersList,a=e.treatmentHistoryForm,s=e.searchPatientForm,o=(0,x.o)((function(e){return e.setDataSourceDiseaseHistoryTable})),u=(0,x.o)((function(e){return e.setSavedDrawingCanvas})),c=(0,x.o)((function(e){return e.setDescriptionsCanvas})),l=(0,x.o)((function(e){return e.setDataSourceVisitTable})),d=(0,x.o)((function(e){return e.setDataSourceAnalysisTable})),p=(0,x.o)((function(e){return e.setDataSourceTreatmentTable})),f=(0,x.o)((function(e){return e.setRecipeList}));return{resetProfilePatient:function(){s.resetFields(),r.resetFields(),t.resetFields(),n.resetFields(),a.resetFields(),i([]),o([]),u({}),c({}),l([]),d([]),p([]),f([])}}};function q(e){var t=e.cellRender,n=e.onSelect,r=e.defaultValue,i=e.refetch,a=(0,J.s0)(),o=W().resetProfilePatient;return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)(N.K,{direction:"row",spacing:4,align:"center",children:[(0,v.jsx)(V.z,{size:"sm",colorScheme:"blue",onClick:function(){o(),a("/person_info")},children:"New Patient"}),(0,v.jsx)(E,{refetch:i})]}),(0,v.jsx)(s.xu,{py:"2",w:"300px",children:(0,v.jsx)(Y.Z,{fullscreen:!1,cellRender:t,onSelect:n,defaultValue:r})})]})}var Q=a.memo(q),X=n(1933);var $=function(){var e=(0,x.o)((function(e){return e.selectedDate})),t=(0,x.o)((function(e){return e.setSelectedDate})),n=function(){var t=(0,i.Z)((0,r.Z)().mark((function t(){var n,i;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e?e.format("YYYY-MM-DD 00:00:00"):f()().format("YYYY-MM-DD 00:00:00"),t.next=3,(0,D.Z)("visits/"+n);case 3:if(null===(i=t.sent)||void 0===i||!i.data){t.next=6;break}return t.abrupt("return",i.data);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),a=(0,X.useQuery)(["calendarPage",e],(function(){return n()})),o=a.data,u=a.refetch,c=a.isLoading;return(0,v.jsxs)(s.xu,{boxShadow:"xl",p:"2",bg:"pink.100",borderRadius:"15px",children:[(0,v.jsx)(s.xu,{children:(0,v.jsx)(Q,{refetch:u,cellRender:function(e){return(null===o||void 0===o?void 0:o.some((function(t){var n=t.visitDate;return f()(n).format("YYYY-MM-DD")===e.format("YYYY-MM-DD")})))?(0,v.jsx)(s.xu,{borderTop:"3px solid black",shadow:"dark-lg"}):null},onSelect:function(e){t(e)},defaultValue:e})}),(0,v.jsx)(s.xu,{children:(0,v.jsx)(P,{isLoadingOnSelectCalendar:c,dataSource:o})})]})}}}]);
//# sourceMappingURL=867.4c8b3d61.chunk.js.map